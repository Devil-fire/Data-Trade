import time
from web3 import Web3, HTTPProvider
ropsten_from_infura = "https://ropsten.infura.io/v3/519f51f294814786b8059dc6302847dc"
xzb_ad = "0xb58a1575b1EDCD4163d4C3c0cCCA4262eF93B100"
xzb_sk = "3ef53789ceafd72cca2cc772d4d50f41eebaf833d77942ba37565e0f2b014881"
w3 = Web3(HTTPProvider(ropsten_from_infura))

false = False
true = True
gas = 3000000
gasprice = w3.toWei('10', 'gwei')
ropsten = 3

contract1_abi = [
	{
		"constant": false,
		"inputs": [
			{
				"name": "bpk0",
				"type": "uint256"
			},
			{
				"name": "bpk1",
				"type": "uint256"
			},
			{
				"name": "tw0",
				"type": "uint256"
			},
			{
				"name": "tw1",
				"type": "uint256"
			},
			{
				"name": "tw2",
				"type": "uint256"
			},
			{
				"name": "tw3",
				"type": "uint256"
			}
		],
		"name": "createProject",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getAmount",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getProjects",
		"outputs": [
			{
				"name": "",
				"type": "address[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	}
]
contract1_bytecode = "0x" + "608060405234801561001057600080fd5b50600060028190555033600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550612cc0806100696000396000f300608060405260043610610057576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806372f4b84b1461005c578063d321fe29146100fb578063dcc6012814610126575b600080fd5b34801561006857600080fd5b506100b9600480360381019080803590602001909291908035906020019092919080359060200190929190803590602001909291908035906020019092919080359060200190929190505050610192565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561010757600080fd5b506101106102fe565b6040518082815260200191505060405180910390f35b34801561013257600080fd5b5061013b610308565b6040518080602001828103825283818151815260200191508051906020019060200280838360005b8381101561017e578082015181840152602081019050610163565b505050509050019250505060405180910390f35b600080878787878787600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16336101c7610396565b808981526020018881526020018781526020018681526020018581526020018481526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200198505050505050505050604051809103906000f080158015610276573d6000803e3d6000fd5b50905060008190806001815401808255809150509060018203906000526020600020016000909192909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550506001600260008282540192505081905550809150509695505050505050565b6000600254905090565b6060600080548060200260200160405190810160405280929190818152602001828054801561038c57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311610342575b5050505050905090565b6040516128ee806103a78339019056006080604052670de0b6b3a7640000601355670c7d713b49da000060145567016345785d8a00006015553480156200003557600080fd5b5060405161010080620028ee83398101806040528101908080519060200190929190805190602001909291908051906020019092919080519060200190929190805190602001909291908051906020019092919080519060200190929190805190602001909291905050506001601660006101000a81548160ff02191690836007811115620000c057fe5b021790555081600660006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550876000806002811015156200015857fe5b018190555086600060016002811015156200016f57fe5b018190555085600760006004811015156200018657fe5b018190555084600760016004811015156200019d57fe5b01819055508360076002600481101515620001b457fe5b01819055508260076003600481101515620001cb57fe5b0181905550505050505050505061270680620001e86000396000f3006080604052600436106100f1576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806301bc4adf146100f657806303ee6404146101495780631b9265b8146101805780632e81ad321461018a57806355ca4ef4146101c157806361e7d66a14610214578063631aa3851461025f578063686e8aaa146102985780636c05f826146102af5780636d90164e146102fa5780637602892b1461032557806379e806a114610378578063a7fc918a14610413578063bb219fe81461045e578063df358731146104f9578063e4c3ca6f14610510578063f91cd4411461053b575b600080fd5b34801561010257600080fd5b5061010b61058e565b6040518082600260200280838360005b8381101561013657808201518184015260208101905061011b565b5050505090500191505060405180910390f35b34801561015557600080fd5b5061017e60048036038101908080359060200190929190803590602001909291905050506105d9565b005b61018861076d565b005b34801561019657600080fd5b506101bf600480360381019080803590602001909291908035906020019092919050505061097b565b005b3480156101cd57600080fd5b506101d6610b15565b6040518082600460200280838360005b838110156102015780820151818401526020810190506101e6565b5050505090500191505060405180910390f35b34801561022057600080fd5b5061025d60048036038101908080359060200190929190803590602001909291908035906020019092919080359060200190929190505050610b60565b005b34801561026b57600080fd5b50610274610cc2565b6040518082600781111561028457fe5b60ff16815260200191505060405180910390f35b3480156102a457600080fd5b506102ad610cd9565b005b3480156102bb57600080fd5b506102f860048036038101908080359060200190929190803590602001909291908035906020019092919080359060200190929190505050610f6d565b005b34801561030657600080fd5b5061030f61112f565b6040518082815260200191505060405180910390f35b34801561033157600080fd5b5061033a611139565b6040518082600460200280838360005b8381101561036557808201518184015260208101905061034a565b5050505090500191505060405180910390f35b34801561038457600080fd5b50610411600480360381019080803590602001909291908035906020019092919080359060200190929190803590602001909291908035906020019092919080359060200190929190803590602001909291908035906020019092919080359060200190929190803590602001909291908035906020019092919080359060200190929190505050611184565b005b34801561041f57600080fd5b5061045c600480360381019080803590602001909291908035906020019092919080359060200190929190803590602001909291905050506113fe565b005b34801561046a57600080fd5b506104f76004803603810190808035906020019092919080359060200190929190803590602001909291908035906020019092919080359060200190929190803590602001909291908035906020019092919080359060200190929190803590602001909291908035906020019092919080359060200190929190803590602001909291905050506115e4565b005b34801561050557600080fd5b5061050e61185e565b005b34801561051c57600080fd5b50610525611ad4565b6040518082815260200191505060405180910390f35b34801561054757600080fd5b50610550611ade565b6040518082600260200280838360005b8381101561057b578082015181840152602081019050610560565b5050505090500191505060405180910390f35b6105966125f5565b60006002806020026040519081016040528092919082600280156105cf576020028201915b8154815260200190600101908083116105bb575b5050505050905090565b60048060078111156105e757fe5b601660009054906101000a900460ff16600781111561060257fe5b141515610677576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561073c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f636c6f7564206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b826017600060028110151561074d57fe5b0181905550816017600160028110151561076357fe5b0181905550505050565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610832576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f6275796572206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b610840601254601354611b29565b341415156108b6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260108152602001807f6e6f7420656e6f756768206d6f6e65790000000000000000000000000000000081525060200191505060405180910390fd5b60038060078111156108c457fe5b601660009054906101000a900460ff1660078111156108df57fe5b141515610954576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b6006601660006101000a81548160ff0219169083600781111561097357fe5b021790555050565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610a40576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f636c6f7564206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b6002806007811115610a4e57fe5b601660009054906101000a900460ff166007811115610a6957fe5b141515610ade576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b6003601660006101000a81548160ff02191690836007811115610afd57fe5b021790555082600d8190555081601281905550505050565b610b1d612617565b6007600480602002604051908101604052809291908260048015610b56576020028201915b815481526020019060010190808311610b42575b5050505050905090565b6001806007811115610b6e57fe5b601660009054906101000a900460ff166007811115610b8957fe5b141515610bfe576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b6002601660006101000a81548160ff02191690836007811115610c1d57fe5b021790555033600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508460036000600281101515610c7457fe5b01819055508360036001600281101515610c8a57fe5b018190555082600b6000600281101515610ca057fe5b018190555081600b6001600281101515610cb657fe5b01819055505050505050565b6000601660009054906101000a900460ff16905090565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610d9e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f636c6f7564206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b6004806007811115610dac57fe5b601660009054906101000a900460ff166007811115610dc757fe5b141515610e3c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b610e44611b67565b8015610e545750610e53611c53565b5b15610f6a57600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc610ea3601254601454611b29565b9081150290604051600060405180830381858888f19350505050158015610ece573d6000803e3d6000fd5b50600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc610f19601254601554611b29565b9081150290604051600060405180830381858888f19350505050158015610f44573d6000803e3d6000fd5b506007601660006101000a81548160ff02191690836007811115610f6457fe5b02179055505b50565b6004806007811115610f7b57fe5b601660009054906101000a900460ff166007811115610f9657fe5b14151561100b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156110d0576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f636c6f7564206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b84601960006004811015156110e157fe5b018190555083601960016004811015156110f757fe5b0181905550826019600260048110151561110d57fe5b0181905550816019600360048110151561112357fe5b01819055505050505050565b6000601254905090565b611141612617565b600e60048060200260405190810160405280929190826004801561117a576020028201915b815481526020019060010190808311611166575b5050505050905090565b600480600781111561119257fe5b601660009054906101000a900460ff1660078111156111ad57fe5b141515611222576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156112e7576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f636c6f7564206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b8c60296000600c811015156112f857fe5b01819055508b60296001600c8110151561130e57fe5b01819055508a60296002600c8110151561132457fe5b01819055508960296003600c8110151561133a57fe5b01819055508860296004600c8110151561135057fe5b01819055508760296005600c8110151561136657fe5b01819055508660296006600c8110151561137c57fe5b01819055508560296007600c8110151561139257fe5b01819055508460296008600c811015156113a857fe5b01819055508360296009600c811015156113be57fe5b0181905550826029600a600c811015156113d457fe5b0181905550816029600b600c811015156113ea57fe5b018190555050505050505050505050505050565b600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156114c3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600b8152602001807f73656c6c6572206f6e6c7900000000000000000000000000000000000000000081525060200191505060405180910390fd5b60068060078111156114d157fe5b601660009054906101000a900460ff1660078111156114ec57fe5b141515611561576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b6004601660006101000a81548160ff0219169083600781111561158057fe5b021790555084600e600060048110151561159657fe5b018190555083600e60016004811015156115ac57fe5b018190555082600e60026004811015156115c257fe5b018190555081600e60036004811015156115d857fe5b01819055505050505050565b60048060078111156115f257fe5b601660009054906101000a900460ff16600781111561160d57fe5b141515611682576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611747576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f636c6f7564206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b8c601d6000600c8110151561175857fe5b01819055508b601d6001600c8110151561176e57fe5b01819055508a601d6002600c8110151561178457fe5b018190555089601d6003600c8110151561179a57fe5b018190555088601d6004600c811015156117b057fe5b018190555087601d6005600c811015156117c657fe5b018190555086601d6006600c811015156117dc57fe5b018190555085601d6007600c811015156117f257fe5b018190555084601d6008600c8110151561180857fe5b018190555083601d6009600c8110151561181e57fe5b018190555082601d600a600c8110151561183457fe5b018190555081601d600b600c8110151561184a57fe5b018190555050505050505050505050505050565b600480600781111561186c57fe5b601660009054906101000a900460ff16600781111561188757fe5b1415156118fc576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156119c1576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f6275796572206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b6007601660006101000a81548160ff021916908360078111156119e057fe5b0217905550600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc611a2f601254601454611b29565b9081150290604051600060405180830381858888f19350505050158015611a5a573d6000803e3d6000fd5b50600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc611aa5601254601554611b29565b9081150290604051600060405180830381858888f19350505050158015611ad0573d6000803e3d6000fd5b5050565b6000600d54905090565b611ae66125f5565b600b600280602002604051908101604052809291908260028015611b1f576020028201915b815481526020019060010190808311611b0b575b5050505050905090565b6000806000841415611b3e5760009150611b60565b8284029050828482811515611b4f57fe5b04141515611b5c57600080fd5b8091505b5092915050565b600080611c4a60176000600281101515611b7d57fe5b015460176001600281101515611b8f57fe5b015460076000600481101515611ba157fe5b015460076001600481101515611bb357fe5b015460076002600481101515611bc557fe5b015460076003600481101515611bd757fe5b0154600b6000600281101515611be957fe5b0154600b6001600281101515611bfb57fe5b015460196000600481101515611c0d57fe5b015460196001600481101515611c1f57fe5b015460196002600481101515611c3157fe5b015460196003600481101515611c4357fe5b0154611d28565b90508091505090565b6000806000806000809350600092505b600c831015611c8e57602983600c81101515611c7b57fe5b0154840193508280600101935050611c63565b611c9784612067565b6040518082805190602001908083835b602083101515611ccc5780518252602082019150602081019050602083039250611ca7565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405180910390209150600d546001029050806000191682600019161415611d1c5760019450611d21565b600094505b5050505090565b600060608060006002604051908082528060200260200182016040528015611d6a57816020015b611d5761263a565b815260200190600190039081611d4f5790505b5092506002604051908082528060200260200182016040528015611da857816020015b611d95612654565b815260200190600190039081611d8d5790505b5091508f836000815181101515611dbb57fe5b9060200190602002015160000181815250508e836000815181101515611ddd57fe5b9060200190602002015160200181815250508d826000815181101515611dff57fe5b90602001906020020151600001516001600281101515611e1b57fe5b6020020181815250508c826000815181101515611e3457fe5b90602001906020020151600001516000600281101515611e5057fe5b6020020181815250508b826000815181101515611e6957fe5b90602001906020020151602001516001600281101515611e8557fe5b6020020181815250508a826000815181101515611e9e57fe5b90602001906020020151602001516000600281101515611eba57fe5b60200201818152505089836001815181101515611ed357fe5b90602001906020020151600001818152505088836001815181101515611ef557fe5b90602001906020020151602001818152505087826001815181101515611f1757fe5b90602001906020020151600001516001600281101515611f3357fe5b60200201818152505086826001815181101515611f4c57fe5b90602001906020020151600001516000600281101515611f6857fe5b60200201818152505085826001815181101515611f8157fe5b90602001906020020151602001516001600281101515611f9d57fe5b60200201818152505084826001815181101515611fb657fe5b90602001906020020151602001516000600281101515611fd257fe5b60200201818152505061204f836000815181101515611fed57fe5b9060200190602002015183600081518110151561200657fe5b9060200190602002015161203186600181518110151561202257fe5b906020019060200201516121be565b85600181518110151561204057fe5b90602001906020020151612259565b90508093505050509c9b505050505050505050505050565b606060008060606000808614156120b5576040805190810160405280600181526020017f300000000000000000000000000000000000000000000000000000000000000081525094506121b5565b8593505b6000841415156120df578280600101935050600a848115156120d757fe5b0493506120b9565b826040519080825280601f01601f1916602001820160405280156121125781602001602082028038833980820191505090505b5091506001830390505b6000861415156121b157600a8681151561213257fe5b066030017f01000000000000000000000000000000000000000000000000000000000000000282828060019003935081518110151561216d57fe5b9060200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350600a868115156121a957fe5b04955061211c565b8194505b50505050919050565b6121c661267b565b60007f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47905060008360000151148015612203575060008360200151145b156122265760408051908101604052806000815260200160008152509150612253565b60408051908101604052808460000151815260200182856020015181151561224a57fe5b06830381525091505b50919050565b6000606080600260405190808252806020026020018201604052801561229957816020015b61228661263a565b81526020019060019003908161227e5790505b50915060026040519080825280602002602001820160405280156122d757816020015b6122c4612654565b8152602001906001900390816122bc5790505b509050868260008151811015156122ea57fe5b906020019060200201819052508482600181518110151561230757fe5b906020019060200201819052508581600081518110151561232457fe5b906020019060200201819052508381600181518110151561234157fe5b906020019060200201819052506123588282612364565b92505050949350505050565b600080600060606000612375612695565b60008751895114151561238757600080fd5b88519550600686029450846040519080825280602002602001820160405280156123c05781602001602082028038833980820191505090505b509350600092505b8583101561259d5788838151811015156123de57fe5b9060200190602002015160000151846000600686020181518110151561240057fe5b9060200190602002018181525050888381518110151561241c57fe5b9060200190602002015160200151846001600686020181518110151561243e57fe5b9060200190602002018181525050878381518110151561245a57fe5b9060200190602002015160000151600060028110151561247657fe5b6020020151846002600686020181518110151561248f57fe5b906020019060200201818152505087838151811015156124ab57fe5b906020019060200201516000015160016002811015156124c757fe5b602002015184600360068602018151811015156124e057fe5b906020019060200201818152505087838151811015156124fc57fe5b9060200190602002015160200151600060028110151561251857fe5b6020020151846004600686020181518110151561253157fe5b9060200190602002018181525050878381518110151561254d57fe5b9060200190602002015160200151600160028110151561256957fe5b6020020151846005600686020181518110151561258257fe5b906020019060200201818152505082806001019350506123c8565b602082602087026020870160086107d05a03fa905080600081146125c0576125c2565bfe5b508015156125cf57600080fd5b60008260006001811015156125e057fe5b60200201511415965050505050505092915050565b6040805190810160405280600290602082028038833980820191505090505090565b608060405190810160405280600490602082028038833980820191505090505090565b604080519081016040528060008152602001600081525090565b6080604051908101604052806126686126b8565b81526020016126756126b8565b81525090565b604080519081016040528060008152602001600081525090565b602060405190810160405280600190602082028038833980820191505090505090565b60408051908101604052806002906020820280388339808201915050905050905600a165627a7a72305820e644cdf8fff4514d8ff9440098781cedd470b0497e8b8d211b35bf8e52a77e650029a165627a7a72305820de01c28d56be3ffcf5a420a1fa69f735a705c7c14b6e2f5cf064fda4deb6cfbe0029"

contract2_abi = [
	{
		"constant": false,
		"inputs": [],
		"name": "Confirm",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "GetMoney",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "pay",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "tk0",
				"type": "uint256"
			},
			{
				"name": "tk1",
				"type": "uint256"
			},
			{
				"name": "tk2",
				"type": "uint256"
			},
			{
				"name": "tk3",
				"type": "uint256"
			}
		],
		"name": "PermitReEnc",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "spk0",
				"type": "uint256"
			},
			{
				"name": "spk1",
				"type": "uint256"
			},
			{
				"name": "rk0",
				"type": "uint256"
			},
			{
				"name": "rk1",
				"type": "uint256"
			}
		],
		"name": "PermitSearch",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "c3",
				"type": "uint256"
			},
			{
				"name": "price",
				"type": "uint256"
			}
		],
		"name": "SearchDone",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "c10",
				"type": "uint256"
			},
			{
				"name": "c11",
				"type": "uint256"
			}
		],
		"name": "Sendc1",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "c20",
				"type": "uint256"
			},
			{
				"name": "c21",
				"type": "uint256"
			},
			{
				"name": "c22",
				"type": "uint256"
			},
			{
				"name": "c23",
				"type": "uint256"
			}
		],
		"name": "Sendc2",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "c30",
				"type": "uint256"
			},
			{
				"name": "c31",
				"type": "uint256"
			},
			{
				"name": "c32",
				"type": "uint256"
			},
			{
				"name": "c33",
				"type": "uint256"
			},
			{
				"name": "c34",
				"type": "uint256"
			},
			{
				"name": "c35",
				"type": "uint256"
			},
			{
				"name": "c36",
				"type": "uint256"
			},
			{
				"name": "c37",
				"type": "uint256"
			},
			{
				"name": "c38",
				"type": "uint256"
			},
			{
				"name": "c39",
				"type": "uint256"
			},
			{
				"name": "c310",
				"type": "uint256"
			},
			{
				"name": "c311",
				"type": "uint256"
			}
		],
		"name": "Sendc3",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "c40",
				"type": "uint256"
			},
			{
				"name": "c41",
				"type": "uint256"
			},
			{
				"name": "c42",
				"type": "uint256"
			},
			{
				"name": "c43",
				"type": "uint256"
			},
			{
				"name": "c44",
				"type": "uint256"
			},
			{
				"name": "c45",
				"type": "uint256"
			},
			{
				"name": "c46",
				"type": "uint256"
			},
			{
				"name": "c47",
				"type": "uint256"
			},
			{
				"name": "c48",
				"type": "uint256"
			},
			{
				"name": "c49",
				"type": "uint256"
			},
			{
				"name": "c410",
				"type": "uint256"
			},
			{
				"name": "c411",
				"type": "uint256"
			}
		],
		"name": "Sendc4",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"name": "bpk0",
				"type": "uint256"
			},
			{
				"name": "bpk1",
				"type": "uint256"
			},
			{
				"name": "tw0",
				"type": "uint256"
			},
			{
				"name": "tw1",
				"type": "uint256"
			},
			{
				"name": "tw2",
				"type": "uint256"
			},
			{
				"name": "tw3",
				"type": "uint256"
			},
			{
				"name": "CLD",
				"type": "address"
			},
			{
				"name": "BUY",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "GetHashofc3",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "GetPrice",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "GetPubkey",
		"outputs": [
			{
				"name": "",
				"type": "uint256[2]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "GetReKey",
		"outputs": [
			{
				"name": "",
				"type": "uint256[2]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "GetState",
		"outputs": [
			{
				"name": "",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "GetToken",
		"outputs": [
			{
				"name": "",
				"type": "uint256[4]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "GetTrapdoor",
		"outputs": [
			{
				"name": "",
				"type": "uint256[4]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
]
contract2_bytecode = "0x" + "6080604052670de0b6b3a7640000601355670c7d713b49da000060145567016345785d8a00006015553480156200003557600080fd5b5060405161010080620028ee83398101806040528101908080519060200190929190805190602001909291908051906020019092919080519060200190929190805190602001909291908051906020019092919080519060200190929190805190602001909291905050506001601660006101000a81548160ff02191690836007811115620000c057fe5b021790555081600660006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550876000806002811015156200015857fe5b018190555086600060016002811015156200016f57fe5b018190555085600760006004811015156200018657fe5b018190555084600760016004811015156200019d57fe5b01819055508360076002600481101515620001b457fe5b01819055508260076003600481101515620001cb57fe5b0181905550505050505050505061270680620001e86000396000f3006080604052600436106100f1576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806301bc4adf146100f657806303ee6404146101495780631b9265b8146101805780632e81ad321461018a57806355ca4ef4146101c157806361e7d66a14610214578063631aa3851461025f578063686e8aaa146102985780636c05f826146102af5780636d90164e146102fa5780637602892b1461032557806379e806a114610378578063a7fc918a14610413578063bb219fe81461045e578063df358731146104f9578063e4c3ca6f14610510578063f91cd4411461053b575b600080fd5b34801561010257600080fd5b5061010b61058e565b6040518082600260200280838360005b8381101561013657808201518184015260208101905061011b565b5050505090500191505060405180910390f35b34801561015557600080fd5b5061017e60048036038101908080359060200190929190803590602001909291905050506105d9565b005b61018861076d565b005b34801561019657600080fd5b506101bf600480360381019080803590602001909291908035906020019092919050505061097b565b005b3480156101cd57600080fd5b506101d6610b15565b6040518082600460200280838360005b838110156102015780820151818401526020810190506101e6565b5050505090500191505060405180910390f35b34801561022057600080fd5b5061025d60048036038101908080359060200190929190803590602001909291908035906020019092919080359060200190929190505050610b60565b005b34801561026b57600080fd5b50610274610cc2565b6040518082600781111561028457fe5b60ff16815260200191505060405180910390f35b3480156102a457600080fd5b506102ad610cd9565b005b3480156102bb57600080fd5b506102f860048036038101908080359060200190929190803590602001909291908035906020019092919080359060200190929190505050610f6d565b005b34801561030657600080fd5b5061030f61112f565b6040518082815260200191505060405180910390f35b34801561033157600080fd5b5061033a611139565b6040518082600460200280838360005b8381101561036557808201518184015260208101905061034a565b5050505090500191505060405180910390f35b34801561038457600080fd5b50610411600480360381019080803590602001909291908035906020019092919080359060200190929190803590602001909291908035906020019092919080359060200190929190803590602001909291908035906020019092919080359060200190929190803590602001909291908035906020019092919080359060200190929190505050611184565b005b34801561041f57600080fd5b5061045c600480360381019080803590602001909291908035906020019092919080359060200190929190803590602001909291905050506113fe565b005b34801561046a57600080fd5b506104f76004803603810190808035906020019092919080359060200190929190803590602001909291908035906020019092919080359060200190929190803590602001909291908035906020019092919080359060200190929190803590602001909291908035906020019092919080359060200190929190803590602001909291905050506115e4565b005b34801561050557600080fd5b5061050e61185e565b005b34801561051c57600080fd5b50610525611ad4565b6040518082815260200191505060405180910390f35b34801561054757600080fd5b50610550611ade565b6040518082600260200280838360005b8381101561057b578082015181840152602081019050610560565b5050505090500191505060405180910390f35b6105966125f5565b60006002806020026040519081016040528092919082600280156105cf576020028201915b8154815260200190600101908083116105bb575b5050505050905090565b60048060078111156105e757fe5b601660009054906101000a900460ff16600781111561060257fe5b141515610677576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561073c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f636c6f7564206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b826017600060028110151561074d57fe5b0181905550816017600160028110151561076357fe5b0181905550505050565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610832576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f6275796572206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b610840601254601354611b29565b341415156108b6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260108152602001807f6e6f7420656e6f756768206d6f6e65790000000000000000000000000000000081525060200191505060405180910390fd5b60038060078111156108c457fe5b601660009054906101000a900460ff1660078111156108df57fe5b141515610954576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b6006601660006101000a81548160ff0219169083600781111561097357fe5b021790555050565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610a40576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f636c6f7564206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b6002806007811115610a4e57fe5b601660009054906101000a900460ff166007811115610a6957fe5b141515610ade576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b6003601660006101000a81548160ff02191690836007811115610afd57fe5b021790555082600d8190555081601281905550505050565b610b1d612617565b6007600480602002604051908101604052809291908260048015610b56576020028201915b815481526020019060010190808311610b42575b5050505050905090565b6001806007811115610b6e57fe5b601660009054906101000a900460ff166007811115610b8957fe5b141515610bfe576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b6002601660006101000a81548160ff02191690836007811115610c1d57fe5b021790555033600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508460036000600281101515610c7457fe5b01819055508360036001600281101515610c8a57fe5b018190555082600b6000600281101515610ca057fe5b018190555081600b6001600281101515610cb657fe5b01819055505050505050565b6000601660009054906101000a900460ff16905090565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610d9e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f636c6f7564206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b6004806007811115610dac57fe5b601660009054906101000a900460ff166007811115610dc757fe5b141515610e3c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b610e44611b67565b8015610e545750610e53611c53565b5b15610f6a57600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc610ea3601254601454611b29565b9081150290604051600060405180830381858888f19350505050158015610ece573d6000803e3d6000fd5b50600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc610f19601254601554611b29565b9081150290604051600060405180830381858888f19350505050158015610f44573d6000803e3d6000fd5b506007601660006101000a81548160ff02191690836007811115610f6457fe5b02179055505b50565b6004806007811115610f7b57fe5b601660009054906101000a900460ff166007811115610f9657fe5b14151561100b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156110d0576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f636c6f7564206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b84601960006004811015156110e157fe5b018190555083601960016004811015156110f757fe5b0181905550826019600260048110151561110d57fe5b0181905550816019600360048110151561112357fe5b01819055505050505050565b6000601254905090565b611141612617565b600e60048060200260405190810160405280929190826004801561117a576020028201915b815481526020019060010190808311611166575b5050505050905090565b600480600781111561119257fe5b601660009054906101000a900460ff1660078111156111ad57fe5b141515611222576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156112e7576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f636c6f7564206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b8c60296000600c811015156112f857fe5b01819055508b60296001600c8110151561130e57fe5b01819055508a60296002600c8110151561132457fe5b01819055508960296003600c8110151561133a57fe5b01819055508860296004600c8110151561135057fe5b01819055508760296005600c8110151561136657fe5b01819055508660296006600c8110151561137c57fe5b01819055508560296007600c8110151561139257fe5b01819055508460296008600c811015156113a857fe5b01819055508360296009600c811015156113be57fe5b0181905550826029600a600c811015156113d457fe5b0181905550816029600b600c811015156113ea57fe5b018190555050505050505050505050505050565b600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156114c3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600b8152602001807f73656c6c6572206f6e6c7900000000000000000000000000000000000000000081525060200191505060405180910390fd5b60068060078111156114d157fe5b601660009054906101000a900460ff1660078111156114ec57fe5b141515611561576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b6004601660006101000a81548160ff0219169083600781111561158057fe5b021790555084600e600060048110151561159657fe5b018190555083600e60016004811015156115ac57fe5b018190555082600e60026004811015156115c257fe5b018190555081600e60036004811015156115d857fe5b01819055505050505050565b60048060078111156115f257fe5b601660009054906101000a900460ff16600781111561160d57fe5b141515611682576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611747576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f636c6f7564206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b8c601d6000600c8110151561175857fe5b01819055508b601d6001600c8110151561176e57fe5b01819055508a601d6002600c8110151561178457fe5b018190555089601d6003600c8110151561179a57fe5b018190555088601d6004600c811015156117b057fe5b018190555087601d6005600c811015156117c657fe5b018190555086601d6006600c811015156117dc57fe5b018190555085601d6007600c811015156117f257fe5b018190555084601d6008600c8110151561180857fe5b018190555083601d6009600c8110151561181e57fe5b018190555082601d600a600c8110151561183457fe5b018190555081601d600b600c8110151561184a57fe5b018190555050505050505050505050505050565b600480600781111561186c57fe5b601660009054906101000a900460ff16600781111561188757fe5b1415156118fc576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f696e76616c69642073746174652e00000000000000000000000000000000000081525060200191505060405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156119c1576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600a8152602001807f6275796572206f6e6c790000000000000000000000000000000000000000000081525060200191505060405180910390fd5b6007601660006101000a81548160ff021916908360078111156119e057fe5b0217905550600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc611a2f601254601454611b29565b9081150290604051600060405180830381858888f19350505050158015611a5a573d6000803e3d6000fd5b50600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc611aa5601254601554611b29565b9081150290604051600060405180830381858888f19350505050158015611ad0573d6000803e3d6000fd5b5050565b6000600d54905090565b611ae66125f5565b600b600280602002604051908101604052809291908260028015611b1f576020028201915b815481526020019060010190808311611b0b575b5050505050905090565b6000806000841415611b3e5760009150611b60565b8284029050828482811515611b4f57fe5b04141515611b5c57600080fd5b8091505b5092915050565b600080611c4a60176000600281101515611b7d57fe5b015460176001600281101515611b8f57fe5b015460076000600481101515611ba157fe5b015460076001600481101515611bb357fe5b015460076002600481101515611bc557fe5b015460076003600481101515611bd757fe5b0154600b6000600281101515611be957fe5b0154600b6001600281101515611bfb57fe5b015460196000600481101515611c0d57fe5b015460196001600481101515611c1f57fe5b015460196002600481101515611c3157fe5b015460196003600481101515611c4357fe5b0154611d28565b90508091505090565b6000806000806000809350600092505b600c831015611c8e57602983600c81101515611c7b57fe5b0154840193508280600101935050611c63565b611c9784612067565b6040518082805190602001908083835b602083101515611ccc5780518252602082019150602081019050602083039250611ca7565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405180910390209150600d546001029050806000191682600019161415611d1c5760019450611d21565b600094505b5050505090565b600060608060006002604051908082528060200260200182016040528015611d6a57816020015b611d5761263a565b815260200190600190039081611d4f5790505b5092506002604051908082528060200260200182016040528015611da857816020015b611d95612654565b815260200190600190039081611d8d5790505b5091508f836000815181101515611dbb57fe5b9060200190602002015160000181815250508e836000815181101515611ddd57fe5b9060200190602002015160200181815250508d826000815181101515611dff57fe5b90602001906020020151600001516001600281101515611e1b57fe5b6020020181815250508c826000815181101515611e3457fe5b90602001906020020151600001516000600281101515611e5057fe5b6020020181815250508b826000815181101515611e6957fe5b90602001906020020151602001516001600281101515611e8557fe5b6020020181815250508a826000815181101515611e9e57fe5b90602001906020020151602001516000600281101515611eba57fe5b60200201818152505089836001815181101515611ed357fe5b90602001906020020151600001818152505088836001815181101515611ef557fe5b90602001906020020151602001818152505087826001815181101515611f1757fe5b90602001906020020151600001516001600281101515611f3357fe5b60200201818152505086826001815181101515611f4c57fe5b90602001906020020151600001516000600281101515611f6857fe5b60200201818152505085826001815181101515611f8157fe5b90602001906020020151602001516001600281101515611f9d57fe5b60200201818152505084826001815181101515611fb657fe5b90602001906020020151602001516000600281101515611fd257fe5b60200201818152505061204f836000815181101515611fed57fe5b9060200190602002015183600081518110151561200657fe5b9060200190602002015161203186600181518110151561202257fe5b906020019060200201516121be565b85600181518110151561204057fe5b90602001906020020151612259565b90508093505050509c9b505050505050505050505050565b606060008060606000808614156120b5576040805190810160405280600181526020017f300000000000000000000000000000000000000000000000000000000000000081525094506121b5565b8593505b6000841415156120df578280600101935050600a848115156120d757fe5b0493506120b9565b826040519080825280601f01601f1916602001820160405280156121125781602001602082028038833980820191505090505b5091506001830390505b6000861415156121b157600a8681151561213257fe5b066030017f01000000000000000000000000000000000000000000000000000000000000000282828060019003935081518110151561216d57fe5b9060200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350600a868115156121a957fe5b04955061211c565b8194505b50505050919050565b6121c661267b565b60007f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47905060008360000151148015612203575060008360200151145b156122265760408051908101604052806000815260200160008152509150612253565b60408051908101604052808460000151815260200182856020015181151561224a57fe5b06830381525091505b50919050565b6000606080600260405190808252806020026020018201604052801561229957816020015b61228661263a565b81526020019060019003908161227e5790505b50915060026040519080825280602002602001820160405280156122d757816020015b6122c4612654565b8152602001906001900390816122bc5790505b509050868260008151811015156122ea57fe5b906020019060200201819052508482600181518110151561230757fe5b906020019060200201819052508581600081518110151561232457fe5b906020019060200201819052508381600181518110151561234157fe5b906020019060200201819052506123588282612364565b92505050949350505050565b600080600060606000612375612695565b60008751895114151561238757600080fd5b88519550600686029450846040519080825280602002602001820160405280156123c05781602001602082028038833980820191505090505b509350600092505b8583101561259d5788838151811015156123de57fe5b9060200190602002015160000151846000600686020181518110151561240057fe5b9060200190602002018181525050888381518110151561241c57fe5b9060200190602002015160200151846001600686020181518110151561243e57fe5b9060200190602002018181525050878381518110151561245a57fe5b9060200190602002015160000151600060028110151561247657fe5b6020020151846002600686020181518110151561248f57fe5b906020019060200201818152505087838151811015156124ab57fe5b906020019060200201516000015160016002811015156124c757fe5b602002015184600360068602018151811015156124e057fe5b906020019060200201818152505087838151811015156124fc57fe5b9060200190602002015160200151600060028110151561251857fe5b6020020151846004600686020181518110151561253157fe5b9060200190602002018181525050878381518110151561254d57fe5b9060200190602002015160200151600160028110151561256957fe5b6020020151846005600686020181518110151561258257fe5b906020019060200201818152505082806001019350506123c8565b602082602087026020870160086107d05a03fa905080600081146125c0576125c2565bfe5b508015156125cf57600080fd5b60008260006001811015156125e057fe5b60200201511415965050505050505092915050565b6040805190810160405280600290602082028038833980820191505090505090565b608060405190810160405280600490602082028038833980820191505090505090565b604080519081016040528060008152602001600081525090565b6080604051908101604052806126686126b8565b81526020016126756126b8565b81525090565b604080519081016040528060008152602001600081525090565b602060405190810160405280600190602082028038833980820191505090505090565b60408051908101604052806002906020820280388339808201915050905050905600a165627a7a72305820e644cdf8fff4514d8ff9440098781cedd470b0497e8b8d211b35bf8e52a77e650029"

wallet_address = None
private_key = None

def setAccount(account, password):
    return account, password

def deployContract(account, password, contract_abi, contract_bytecode):
    contract = w3.eth.contract(abi=contract_abi, bytecode=contract_bytecode)
    nonce = w3.eth.getTransactionCount(account)
    raw_txn = contract.constructor().buildTransaction({
        'gas': gas,
        'gasPrice': gasprice,
        'nonce': nonce,
        'chainId': ropsten,
    })
    signed_txn = w3.eth.account.signTransaction(raw_txn, private_key=password)
    res = w3.eth.sendRawTransaction(signed_txn.rawTransaction)
    time.sleep(15)
    txn_receipt = w3.eth.waitForTransactionReceipt(res)
    contract = w3.eth.contract(address=txn_receipt.contractAddress, abi=contract_abi)
    return contract, txn_receipt.contractAddress

def getContract(contract_abi, contract_address):
    return w3.eth.contract(address=contract_address, abi=contract_abi)

def createProject(contract, account, password, params):
    nonce = w3.eth.getTransactionCount(account)
    raw_txn = contract.functions.createProject(
        params[0], params[1], params[2],params[3], params[4], params[5]
    ).buildTransaction({
        'gas': gas,
        'gasPrice': gasprice,
        'nonce': nonce,
        'chainId': ropsten,
    })
    signed_txn = w3.eth.account.signTransaction(raw_txn, private_key=password)
    res = w3.eth.sendRawTransaction(signed_txn.rawTransaction)
    time.sleep(15)
    txn_receipt = w3.eth.waitForTransactionReceipt(res)
    return txn_receipt

def getProjects(contract, account, password):
    return contract.functions.getProjects().call()

def getAmount(contract, account, password):
    return contract.functions.getAmount().call()

def permitSearch(contract, account, password, params):
    nonce = w3.eth.getTransactionCount(account)
    raw_txn = contract.functions.PermitSearch(
        params[0], params[1], params[2], params[3]
    ).buildTransaction({
        'gas': gas,
        'gasPrice': gasprice,
        'nonce': nonce,
        'chainId': ropsten,
    })
    signed_txn = w3.eth.account.signTransaction(raw_txn, private_key=password)
    res = w3.eth.sendRawTransaction(signed_txn.rawTransaction)
    time.sleep(15)
    txn_receipt = w3.eth.waitForTransactionReceipt(res)
    return txn_receipt

def searchDone(contract, account, password, params):
    nonce = w3.eth.getTransactionCount(account)
    raw_txn = contract.functions.SearchDone(
        params[0], params[1]
    ).buildTransaction({
        'gas': gas,
        'gasPrice': gasprice,
        'nonce': nonce,
        'chainId': ropsten,
    })
    signed_txn = w3.eth.account.signTransaction(raw_txn, private_key=password)
    res = w3.eth.sendRawTransaction(signed_txn.rawTransaction)
    time.sleep(15)
    txn_receipt = w3.eth.waitForTransactionReceipt(res)
    return txn_receipt

def pay(contract, account, password, params):
    amount_in_wei = w3.toWei(params, 'ether')
    nonce = w3.eth.getTransactionCount(account)
    raw_txn = contract.functions.pay().buildTransaction({
        'gas': gas,
        'gasPrice': gasprice,
        'nonce': nonce,
        'chainId': ropsten,
        'value': amount_in_wei,
    })
    signed_txn = w3.eth.account.signTransaction(raw_txn, private_key=password)
    res = w3.eth.sendRawTransaction(signed_txn.rawTransaction)
    time.sleep(15)
    txn_receipt = w3.eth.waitForTransactionReceipt(res)
    return txn_receipt

def permitReEnc(contract, account, password, params):
    nonce = w3.eth.getTransactionCount(account)
    raw_txn = contract.functions.PermitReEnc(
        params[0], params[1], params[2], params[3]
    ).buildTransaction({
        'gas': gas,
        'gasPrice': gasprice,
        'nonce': nonce,
        'chainId': ropsten,
    })
    signed_txn = w3.eth.account.signTransaction(raw_txn, private_key=password)
    res = w3.eth.sendRawTransaction(signed_txn.rawTransaction)
    time.sleep(15)
    txn_receipt = w3.eth.waitForTransactionReceipt(res)
    return txn_receipt

def confirm(contract, account, password):
    nonce = w3.eth.getTransactionCount(account)
    raw_txn = contract.functions.Confirm().buildTransaction({
        'gas': gas,
        'gasPrice': gasprice,
        'nonce': nonce,
        'chainId': ropsten,
    })
    signed_txn = w3.eth.account.signTransaction(raw_txn, private_key=password)
    res = w3.eth.sendRawTransaction(signed_txn.rawTransaction)
    time.sleep(15)
    txn_receipt = w3.eth.waitForTransactionReceipt(res)
    return txn_receipt

def sendc1(contract, account, password, params):
    nonce = w3.eth.getTransactionCount(account)
    raw_txn = contract.functions.Sendc1(
        params[0], params[1]
    ).buildTransaction({
        'gas': gas,
        'gasPrice': gasprice,
        'nonce': nonce,
        'chainId': ropsten,
    })
    signed_txn = w3.eth.account.signTransaction(raw_txn, private_key=password)
    res = w3.eth.sendRawTransaction(signed_txn.rawTransaction)
    time.sleep(15)
    txn_receipt = w3.eth.waitForTransactionReceipt(res)
    return txn_receipt

def sendc2(contract, account, password, params):
    nonce = w3.eth.getTransactionCount(account)
    raw_txn = contract.functions.Sendc2(
        params[0], params[1], params[2], params[3]
    ).buildTransaction({
        'gas': gas,
        'gasPrice': gasprice,
        'nonce': nonce,
        'chainId': ropsten,
    })
    signed_txn = w3.eth.account.signTransaction(raw_txn, private_key=password)
    res = w3.eth.sendRawTransaction(signed_txn.rawTransaction)
    time.sleep(15)
    txn_receipt = w3.eth.waitForTransactionReceipt(res)
    return txn_receipt

def sendc3(contract, account, password, params):
    nonce = w3.eth.getTransactionCount(account)
    raw_txn = contract.functions.Sendc3(
        params[0], params[1], params[2], params[3],
        params[4], params[5], params[6], params[7],
        params[8], params[9], params[10], params[11]
    ).buildTransaction({
        'gas': gas,
        'gasPrice': gasprice,
        'nonce': nonce,
        'chainId': ropsten,
    })
    signed_txn = w3.eth.account.signTransaction(raw_txn, private_key=password)
    res = w3.eth.sendRawTransaction(signed_txn.rawTransaction)
    time.sleep(15)
    txn_receipt = w3.eth.waitForTransactionReceipt(res)
    return txn_receipt

def sendc4(contract, account, password, params):
    nonce = w3.eth.getTransactionCount(account)
    raw_txn = contract.functions.Sendc4(
        params[0], params[1], params[2], params[3],
        params[4], params[5], params[6], params[7],
        params[8], params[9], params[10], params[11]
    ).buildTransaction({
        'gas': gas,
        'gasPrice': gasprice,
        'nonce': nonce,
        'chainId': ropsten,
    })
    signed_txn = w3.eth.account.signTransaction(raw_txn, private_key=password)
    res = w3.eth.sendRawTransaction(signed_txn.rawTransaction)
    time.sleep(15)
    txn_receipt = w3.eth.waitForTransactionReceipt(res)
    return txn_receipt

def getMoney(contract, account, password):
    nonce = w3.eth.getTransactionCount(account)
    raw_txn = contract.functions.GetMoney().buildTransaction({
        'gas': gas,
        'gasPrice': gasprice,
        'nonce': nonce,
        'chainId': ropsten,
    })
    signed_txn = w3.eth.account.signTransaction(raw_txn, private_key=password)
    res = w3.eth.sendRawTransaction(signed_txn.rawTransaction)
    time.sleep(15)
    txn_receipt = w3.eth.waitForTransactionReceipt(res)
    return txn_receipt

def getState(contract):
    return  contract.functions.GetState().call()

def getPubkey(contract, account, password):
    return  contract.functions.GetPubkey().call()

def getTrapdoor(contract, account, password):
    return  contract.functions.GetTrapdoor().call()

def getReKey(contract, account, password):
    return  contract.functions.GetReKey().call()

def getToken(contract, account, password):
    return  contract.functions.GetToken().call()

def getPrice(contract, account, password):
    return  contract.functions.GetPrice().call()

def getHashofc3(contract, account, password):
    return  contract.functions.GetHashofc3().call()

'''if __name__ == '__main__':
    start = time.time()
    print("set account...")
    wallet_address, private_key = setAccount(xzb_ad, xzb_sk)
    print("deploy mother contract...")
    contract1, contract1_address = deployContract(wallet_address, private_key, contract1_abi, contract1_bytecode)
    print("mother contract address is: " + contract1_address)
    contract1 = getContract(contract1_abi, contract1_address)
    print("create project...")
    params = [1,
              2,
              6870542479322718823060310024275555214637695610535542882448036040569087423325,
              11854480067853908076475903899041905181505172012550853298206733985069475237031,
              10141356288727514725932289831563018687745677574732778364470152261455148337495,
              11453155606301234973629080751718351186349805488834321399664563490161384703968]
    createProject(contract1, wallet_address, private_key, params)
    print("get amount...")
    amount = getAmount(contract1, wallet_address, private_key)
    print("get projects...")
    projects = getProjects(contract1, wallet_address, private_key)
    print("scheme contract address is: " + projects[amount - 1])
    print("get scheme contract...")
    contract2 = getContract(contract2_abi, projects[amount - 1])
    print("state is : " + str(getState(contract2)))
    params = [1,
              2,
              1,
              2]
    print("permit search...")
    permitSearch(contract2, wallet_address, private_key, params)
    print("state is : " + str(getState(contract2)))
    params = [66082758040854340712027746921420293984289992966859698166526800997949621520005,1]
    print("search done...")
    searchDone(contract2, wallet_address, private_key, params)
    print("state is : " + str(getState(contract2)))
    params = 1
    print("pay...")
    pay(contract2, wallet_address, private_key, params)
    print("state is : " + str(getState(contract2)))
    params = [6870542479322718823060310024275555214637695610535542882448036040569087423325,
              11854480067853908076475903899041905181505172012550853298206733985069475237031,
              10141356288727514725932289831563018687745677574732778364470152261455148337495,
              11453155606301234973629080751718351186349805488834321399664563490161384703968]
    print("permit ReEnc...")
    permitReEnc(contract2, wallet_address, private_key, params)
    print("state is : " + str(getState(contract2)))

    #route a
    # print("confirm...")
    # confirm(contract2, wallet_address, private_key)
    # print("state is : " + str(getState(contract2)))

    #route b
    print("send cipher...")
    params = [1,
              2]
    sendc1(contract2, wallet_address, private_key, params)
    params = [6870542479322718823060310024275555214637695610535542882448036040569087423325,
              11854480067853908076475903899041905181505172012550853298206733985069475237031,
              10141356288727514725932289831563018687745677574732778364470152261455148337495,
              11453155606301234973629080751718351186349805488834321399664563490161384703968]
    sendc2(contract2, wallet_address, private_key, params)
    params = [13706908386811760384158708908146088936159065022865358144926521450580784020979,
              11654972409725888109818025724672256771201857078023750587422479980514798731299,
              7592770740657770950867135884935845759959552105145323740631685586909025179426,
              18945773498923302068270848601093448589988530994695995082009671290804891432999,
              20433956641069747600374692799849432894125036029750165937685260157274116749830,
              14107141394671679185469184580255312933610616787002985096264764780857242900971,
              5641417304606073534674519826688578751768778800569683114049233059370417041974,
              5001429849161928115468772465213389360413053442492531030621060484034550292278,
              7535061763640824656480421744423099576962300052521860017756165652845725855436,
              13017382285678239090333878958691994034383353952588691861080279811235723067340,
              20426722185340866569922219441515063975357559792954509983903927805399870473351,
              3351964469945976722418212004851530065697083897339803752849216082710764316263]
    sendc3(contract2, wallet_address, private_key, params)
    params = [11033816160156978396904574019756922600787363318315319502719403675536478572968,
              1303078916785645696265903225244479387597301539771885761130144217130421057653,
              3197364392929659780380066891756561006945728904592662157810733031902303396291,
              1775995914635957298269729769627211641735856317612276708728839138374701626469,
              2526194568860726416769019744065086847511764744493598166282240950261033811389,
              18860950312598499919526454011942720695873682707489919191040399379672491643079,
              7559437985623501032765204976368046263712191560523290243730207804615231710003,
              16615840038798358342423319906131014860919802390365689449086714062869560757154,
              20987405554352550848966375792350730859367929925267314661826439725305172345260,
              15755216818895372921179438447798408960512823515756583015969598360416916474794,
              5553899265300675653970138449051540278706925114644602065950106835906541400248,
              19488502776162298909469521340204275603029453451380694681056321123439941576993]
    sendc4(contract2, wallet_address, private_key, params)
    print("get money...")
    getMoney(contract2, wallet_address, private_key)
    print("state is : " + str(getState(contract2)))
    end = time.time()
    print("time used: " + str((end - start)))'''
